{"version":3,"sources":["components/Editor.js","components/ListErrors.js"],"names":["Editor","inject","observer","state","tagInput","changeTitle","e","_this","props","editorStore","setTitle","target","value","changeDescription","setDescription","changeBody","setBody","changeTagInput","setState","handleTagInputKeyDown","ev","keyCode","preventDefault","handleAddTag","addTag","trim","handleRemoveTag","tag","inProgress","removeTag","submitForm","submit","then","article","reset","store","router","goTo","views","id","slug","this","setArticleSlug","params","loadInitialData","prevProps","_this2","_this$props$editorSto","errors","title","description","body","tagList","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","className","_ListErrors__WEBPACK_IMPORTED_MODULE_5__","type","placeholder","onChange","disabled","rows","onBlur","onKeyDown","map","key","onClick","React","Component","ListErrors","react__WEBPACK_IMPORTED_MODULE_5___default","Object","keys"],"mappings":"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","file":"static/js/2.e9d3a628.chunk.js","sourcesContent":["import ListErrors from \"./ListErrors\";\nimport React from \"react\";\nimport { inject, observer } from \"mobx-react\";\nimport views from \"../config/views\";\n// import { withRouter } from \"react-router-dom\";\n\n@inject(\"editorStore\", \"store\")\n// @withRouter\n@observer\nclass Editor extends React.Component {\n  state = {\n    tagInput: \"\"\n  };\n\n  componentWillMount() {\n    this.props.editorStore.setArticleSlug(this.props.store.router.params.slug);\n  }\n\n  componentDidMount() {\n    this.props.editorStore.loadInitialData();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (\n      this.props.store.router.params.slug !== prevProps.store.router.params.slug\n    ) {\n      this.props.editorStore.setArticleSlug(\n        this.props.store.router.params.slug\n      );\n      this.props.editorStore.loadInitialData();\n    }\n  }\n\n  changeTitle = e => this.props.editorStore.setTitle(e.target.value);\n  changeDescription = e =>\n    this.props.editorStore.setDescription(e.target.value);\n  changeBody = e => this.props.editorStore.setBody(e.target.value);\n  changeTagInput = e => this.setState({ tagInput: e.target.value });\n\n  handleTagInputKeyDown = ev => {\n    switch (ev.keyCode) {\n      case 13: // Enter\n      case 9: // Tab\n      case 188: // ,\n        if (ev.keyCode !== 9) ev.preventDefault();\n        this.handleAddTag();\n        break;\n      default:\n        break;\n    }\n  };\n\n  handleAddTag = () => {\n    if (this.state.tagInput) {\n      this.props.editorStore.addTag(this.state.tagInput.trim());\n      this.setState({ tagInput: \"\" });\n    }\n  };\n\n  handleRemoveTag = tag => {\n    if (this.props.editorStore.inProgress) return;\n    this.props.editorStore.removeTag(tag);\n  };\n\n  submitForm = ev => {\n    ev.preventDefault();\n    const { editorStore } = this.props;\n    editorStore.submit().then(article => {\n      editorStore.reset();\n      // this.props.history.replace(`/article/${article.slug}`);\n      this.props.store.router.goTo(views.article, { id: article.slug });\n    });\n  };\n\n  render() {\n    const {\n      inProgress,\n      errors,\n      title,\n      description,\n      body,\n      tagList\n    } = this.props.editorStore;\n\n    return (\n      <div className=\"editor-page\">\n        <div className=\"container page\">\n          <div className=\"row\">\n            <div className=\"col-md-10 offset-md-1 col-xs-12\">\n              <ListErrors errors={errors} />\n\n              <form>\n                <fieldset>\n                  <fieldset className=\"form-group\">\n                    <input\n                      className=\"form-control form-control-lg\"\n                      type=\"text\"\n                      placeholder=\"Article Title\"\n                      value={title}\n                      onChange={this.changeTitle}\n                      disabled={inProgress}\n                    />\n                  </fieldset>\n\n                  <fieldset className=\"form-group\">\n                    <input\n                      className=\"form-control\"\n                      type=\"text\"\n                      placeholder=\"What's this article about?\"\n                      value={description}\n                      onChange={this.changeDescription}\n                      disabled={inProgress}\n                    />\n                  </fieldset>\n\n                  <fieldset className=\"form-group\">\n                    <textarea\n                      className=\"form-control\"\n                      rows=\"8\"\n                      placeholder=\"Write your article (in markdown)\"\n                      value={body}\n                      onChange={this.changeBody}\n                      disabled={inProgress}\n                    />\n                  </fieldset>\n\n                  <fieldset className=\"form-group\">\n                    <input\n                      className=\"form-control\"\n                      type=\"text\"\n                      placeholder=\"Enter tags\"\n                      value={this.state.tagInput}\n                      onChange={this.changeTagInput}\n                      onBlur={this.handleAddTag}\n                      onKeyDown={this.handleTagInputKeyDown}\n                      disabled={inProgress}\n                    />\n\n                    <div className=\"tag-list\">\n                      {tagList.map(tag => {\n                        return (\n                          <span className=\"tag-default tag-pill\" key={tag}>\n                            <i\n                              className=\"ion-close-round\"\n                              onClick={() => this.handleRemoveTag(tag)}\n                            />\n                            {tag}\n                          </span>\n                        );\n                      })}\n                    </div>\n                  </fieldset>\n\n                  <button\n                    className=\"btn btn-lg pull-xs-right btn-primary\"\n                    type=\"button\"\n                    disabled={inProgress}\n                    onClick={this.submitForm}\n                  >\n                    Publish Article\n                  </button>\n                </fieldset>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Editor;\n","import React from \"react\";\n\nclass ListErrors extends React.Component {\n  render() {\n    const errors = this.props.errors;\n    if (errors) {\n      return (\n        <ul className=\"error-messages\">\n          {Object.keys(errors).map(key => {\n            return (\n              <li key={key}>\n                {key} {errors[key]}\n              </li>\n            );\n          })}\n        </ul>\n      );\n    } else {\n      return null;\n    }\n  }\n}\n\nexport default ListErrors;\n"],"sourceRoot":""}