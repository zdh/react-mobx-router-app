(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{206:function(e,t,a){"use strict";a.r(t);var r,n,s=a(6),o=a(7),c=a(32),l=a(31),m=a(33),i=a(2),u=a.n(i),d=a(5),p=a(11),h=function(e){var t=e.article;return e.canModify?u.a.createElement("span",null,u.a.createElement(d.Link,{className:"btn btn-outline-secondary btn-sm",view:p.a.editor,store:e.store,params:{slug:t.slug}},u.a.createElement("i",{className:"ion-edit"})," Edit Article"),u.a.createElement("button",{className:"btn btn-outline-danger btn-sm",onClick:function(){return e.onDelete(t.slug)}},u.a.createElement("i",{className:"ion-trash-a"})," Delete Article")):u.a.createElement("span",null)},E=a(12),b=Object(E.observer)(function(e){var t=e.article;return u.a.createElement("div",{className:"article-meta"},u.a.createElement(d.Link,{view:p.a.profile,store:e.store,params:{username:t.author.username}},u.a.createElement("img",{src:t.author.image,alt:""})),u.a.createElement("div",{className:"info"},u.a.createElement(d.Link,{className:"author",view:p.a.profile,store:e.store,params:{username:t.author.username}},t.author.username),u.a.createElement("span",{className:"date"},new Date(t.createdAt).toDateString())),u.a.createElement(h,{canModify:e.canModify,article:t,onDelete:e.onDelete}))}),f=Object(E.inject)("commentsStore")(r=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(l.a)(t).call(this,e))).state={body:""},a.handleBodyChange=function(e){a.setState({body:e.target.value})},a.createComment=function(e){e.preventDefault(),a.props.commentsStore.createComment({body:a.state.body}).then(function(){return a.setState({body:""})})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.commentsStore.isCreatingComment;return u.a.createElement("form",{className:"card comment-form",onSubmit:this.createComment},u.a.createElement("div",{className:"card-block"},u.a.createElement("textarea",{className:"form-control",placeholder:"Write a comment...",value:this.state.body,disabled:e,onChange:this.handleBodyChange,rows:"3"})),u.a.createElement("div",{className:"card-footer"},u.a.createElement("img",{src:this.props.currentUser.image,className:"comment-author-img",alt:""}),u.a.createElement("button",{className:"btn btn-sm btn-primary",type:"submit"},"Post Comment")))}}]),t}(u.a.Component))||r,g=function(e){return e.show?u.a.createElement("span",{className:"mod-options"},u.a.createElement("i",{className:"ion-trash-a",onClick:function(){return e.onDelete(e.commentId)}})):null},v=function(e){var t=e.comment,a=e.currentUser&&e.currentUser.username===t.author.username;return u.a.createElement("div",{className:"card"},u.a.createElement("div",{className:"card-block"},u.a.createElement("p",{className:"card-text"},t.body)),u.a.createElement("div",{className:"card-footer"},u.a.createElement(d.Link,{className:"comment-author",view:p.a.profile,store:e.store,params:{username:t.author.username}},u.a.createElement("img",{src:t.author.image,className:"comment-author-img",alt:""})),"\xa0",u.a.createElement(d.Link,{className:"comment-author",view:p.a.profile,store:e.store,params:{username:t.author.username}},t.author.username),u.a.createElement("span",{className:"date-posted"},new Date(t.createdAt).toDateString()),u.a.createElement(g,{show:a,slug:e.slug,commentId:t.id,onDelete:e.onDelete})))},N=Object(E.observer)(function(e){return u.a.createElement("div",null,e.comments.map(function(t){return u.a.createElement(v,{store:e.store,comment:t,currentUser:e.currentUser,slug:e.slug,key:t.id,onDelete:e.onDelete})}))}),y=function(e){return e.currentUser?u.a.createElement("div",{className:"col-xs-12 col-md-8 offset-md-2"},u.a.createElement("div",null,u.a.createElement("list-errors",{errors:e.errors}),u.a.createElement(f,{slug:e.slug,currentUser:e.currentUser})),u.a.createElement(N,{comments:e.comments,slug:e.slug,currentUser:e.currentUser,onDelete:e.onDelete})):u.a.createElement("div",{className:"col-xs-12 col-md-8 offset-md-2"},u.a.createElement("p",null,u.a.createElement(d.Link,{view:p.a.login,store:e.store},"Sign in"),"\xa0or\xa0",u.a.createElement(d.Link,{view:p.a.register,store:e.store},"Sign up"),"\xa0to add comments on this article."),u.a.createElement(N,{store:e.store,comments:e.comments,slug:e.slug,currentUser:e.currentUser,onDelete:e.onDelete}))},D=a(210),j=a(212),S=a.n(j),C=Object(E.inject)("articlesStore","userStore","commentsStore","store")(n=Object(E.observer)(n=function(e){function t(){var e,a;Object(s.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(n)))).handleDeleteArticle=function(e){a.props.articlesStore.deleteArticle(e).then(function(){return a.props.store.router.goTo(p.a.home)})},a.handleDeleteComment=function(e){a.props.commentsStore.deleteComment(e)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.store.router.params.id;this.props.articlesStore.loadArticle(e,{acceptCached:!0}),this.props.commentsStore.setArticleSlug(e),this.props.commentsStore.loadComments()}},{key:"render",value:function(){var e=this.props.store.router.params.id,t=this.props.userStore.currentUser,a=this.props.commentsStore,r=a.comments,n=a.commentErrors,s=this.props.articlesStore.getArticle(e);if(!s)return u.a.createElement(D.a,{message:"Can't load article"});var o={__html:S()(s.body,{sanitize:!0})},c=t&&t.username===s.author.username;return u.a.createElement("div",{className:"article-page"},u.a.createElement("div",{className:"banner"},u.a.createElement("div",{className:"container"},u.a.createElement("h1",null,s.title),u.a.createElement(b,{store:this.props.store,article:s,canModify:c,onDelete:this.handleDeleteArticle}))),u.a.createElement("div",{className:"container page"},u.a.createElement("div",{className:"row article-content"},u.a.createElement("div",{className:"col-xs-12"},u.a.createElement("div",{dangerouslySetInnerHTML:o}),u.a.createElement("ul",{className:"tag-list"},s.tagList.map(function(e){return u.a.createElement("li",{className:"tag-default tag-pill tag-outline",key:e},e)})))),u.a.createElement("hr",null),u.a.createElement("div",{className:"article-actions"}),u.a.createElement("div",{className:"row"},u.a.createElement(y,{store:this.props.store,comments:r,errors:n,slug:e,currentUser:t,onDelete:this.handleDeleteComment}))))}}]),t}(u.a.Component))||n)||n;t.default=C},210:function(e,t,a){"use strict";var r=a(6),n=a(7),s=a(32),o=a(31),c=a(33),l=a(2),m=a.n(l),i={display:"flex",justifyContent:"center"},u={display:"inline-block",margin:"20px auto",borderRadius:"4px",padding:"8px 15px",color:"rgb(240, 45, 45)",fontWeight:"bold",backgroundColor:"rgba(240, 45, 45, 0.1)"},d=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){return m.a.createElement("div",{style:i},m.a.createElement("div",{style:u},this.props.message))}}]),t}(m.a.Component);t.a=d}}]);
//# sourceMappingURL=1.302ddb12.chunk.js.map